(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{10067:e=>{e.exports={reset__form__box:"ResetPasswordForm_reset__form__box__fHc_h",reset__title:"ResetPasswordForm_reset__title__QDjyx",inputs__box:"ResetPasswordForm_inputs__box__9X7jz",input__title:"ResetPasswordForm_input__title__LngoZ",inputs__text_extra:"ResetPasswordForm_inputs__text_extra__2585z",inputs__text_extra_2:"ResetPasswordForm_inputs__text_extra_2__CBFpJ",extra__error__class:"ResetPasswordForm_extra__error__class__LS2q6",error__message:"ResetPasswordForm_error__message__z_1bR",form__button:"ResetPasswordForm_form__button__I7RMY",form__button_back:"ResetPasswordForm_form__button_back__xhoqb",verify__container:"ResetPasswordForm_verify__container__CbW1i",verify__text:"ResetPasswordForm_verify__text__dBbBZ",verify__subtitle:"ResetPasswordForm_verify__subtitle__WHowl",otp__wrapper:"ResetPasswordForm_otp__wrapper__K35LG",back__button:"ResetPasswordForm_back__button__p7X7a"}},17828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,r(64054).createAsyncLocalStorage)()},49395:(e,t,r)=>{Promise.resolve().then(r.bind(r,55856))},55856:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var a=r(95155),_=r(66766),s=r(81260),n=r.n(s),o=r(61321),i=r(12115),l=r(40055),c=r(33284),u=r(56671),g=r(71747),d=r(29795),m=r(10067),p=r.n(m),x=r(83419),h=r(86949),b=r(60584),f=r(17652),w=r(35695);let v=e=>{let{onBack:t}=e,[r,_]=(0,i.useState)(""),[s,n]=(0,i.useState)(""),[o,g]=(0,i.useState)(!1),[d,m]=(0,i.useState)(""),[v,P]=(0,i.useState)("email"),j=(0,w.useRouter)(),y=(0,f.c3)("ResetPasswordPage"),L=(0,b.f4)(),k=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),N=async e=>{if(e.preventDefault(),!r)return void m(y("emailRequired"));if(!k(r))return void m(y("emailInvalid"));if(s.length<6)return void m(y("passwordTooShort"));g(!0),m("");try{c.Rh.post("/auth/recover-password",{email:r,newPassword:s},{headers:{"Accept-Language":L}}),u.o.success(y("codeSentSuccess")),P("verify")}catch(e){var t,_,n,o;console.error("Reset password error:",e),u.o.error((0,a.jsxs)("div",{style:{lineHeight:1.5},children:[(0,a.jsx)("strong",{style:{display:"block",marginBottom:4},children:y("resetError")}),(0,a.jsx)("span",{children:(null==(_=e.response)||null==(t=_.data)?void 0:t.message)||y("checkDataError")})]}),{style:{background:"#AC2525"}}),m((null==(o=e.response)||null==(n=o.data)?void 0:n.message)||y("resetPasswordError"))}finally{g(!1)}},S=async e=>{if(!o){g(!0);try{let _=await c.Rh.post("/auth/verify-recover-password",{email:r,recoverCode:e},{headers:{"Accept-Language":L}});(0,h.oA)(_.data),u.o.success((0,a.jsxs)("div",{style:{lineHeight:1.5,marginLeft:"10px"},children:[(0,a.jsx)("strong",{style:{display:"block",marginBottom:4,fontSize:"18px"},children:y("congratulations")}),(0,a.jsx)("span",{children:y("passwordChangedSuccess")})]}),{style:{background:"#2E7D32"}}),setTimeout(()=>{t(),j.replace("/")},2e3)}catch(e){var _,s;console.error("Verify code error:",e),u.o.error((0,a.jsxs)("div",{style:{lineHeight:1.5},children:[(0,a.jsx)("strong",{style:{display:"block",marginBottom:4},children:y("confirmationError")}),(0,a.jsx)("span",{children:(null==(s=e.response)||null==(_=s.data)?void 0:_.message)||y("invalidCode")})]}),{style:{background:"#AC2525"}})}finally{g(!1)}}};return"verify"===v?(0,a.jsxs)("div",{className:p().reset__form__box,children:[(0,a.jsx)("h2",{className:p().reset__title,children:y("confirmationTitle")}),(0,a.jsxs)("div",{className:p().verify__container,children:[(0,a.jsxs)("p",{className:p().verify__text,children:[y("verificationText")," ",r]}),(0,a.jsx)("p",{className:p().verify__subtitle,children:y("verificationSubtitle")}),(0,a.jsx)("div",{className:p().otp__wrapper,children:(0,a.jsx)(x.A,{length:4,onComplete:S,disabled:o})}),(0,a.jsx)("button",{onClick:t,className:p().back__button,disabled:o,children:y("backToLogin")})]})]}):(0,a.jsxs)("div",{className:p().reset__form__box,children:[(0,a.jsx)("h2",{className:p().reset__title,children:y("title")}),(0,a.jsxs)("div",{className:p().inputs__box,children:[(0,a.jsx)(l.A,{extraClass:"".concat(p().inputs__text_extra," ").concat(d&&!k(r)&&r.length>0&&p().extra__error__class),isSecret:!1,onSetValue:e=>{_(e),m("")},currentValue:r,placeholder:y("emailPlaceholder"),title:(0,a.jsx)("p",{className:p().input__title,children:y("emailLabel")}),errorValue:r.length>0&&!k(r)?y("emailCorrect"):""}),(0,a.jsx)(l.A,{extraClass:"".concat(p().inputs__text_extra," ").concat(p().inputs__text_extra_2," ").concat(d&&p().extra__error__class),isSecret:!0,onSetValue:e=>{n(e),m("")},currentValue:s,errorValue:s.length<6&&0!==s.length?y("passwordMinLength"):"",placeholder:y("newPasswordPlaceholder"),title:(0,a.jsx)("p",{className:p().input__title,children:y("newPasswordLabel")})}),d&&(0,a.jsx)("p",{className:p().error__message,children:d}),(0,a.jsx)("button",{onClick:N,className:p().form__button,disabled:o,children:o?y("sending"):y("confirmButton")}),(0,a.jsx)("button",{onClick:t,className:p().form__button_back,children:y("backToLogin")})]})]})};var P=r(87358);let j=e=>{let{onAuth:t,className:r="",buttonSize:_="large",cornerRadius:s=20,requestAccess:n="write",usePic:o=!0,lang:l="en"}=e,c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e="onTelegramAuth_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));window[e]=e=>{console.log("Telegram user data:",e),t(e)},c.current&&(c.current.innerHTML="");let r=document.createElement("script");return r.src="https://telegram.org/js/telegram-widget.js?22",r.async=!0,r.setAttribute("data-telegram-login","".concat(P.env.NEXT_PUBLIC_BOT_NAME)),r.setAttribute("data-size",_),r.setAttribute("data-onauth","".concat(e,"(user)")),n&&r.setAttribute("data-request-access",n),c.current&&(r.setAttribute("style","cursor: pointer !important"),c.current.appendChild(r)),()=>{window[e]&&delete window[e]}},[t,_,n]),(0,a.jsx)("div",{ref:c,className:r})};var y=r(6874),L=r.n(y),k=r(70724);let N=e=>{let{categories:t}=e,[r,s]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[x,h]=(0,i.useState)(!1),[P,y]=(0,i.useState)(""),[N,S]=(0,i.useState)(!1),A=(0,w.useRouter)(),R=(0,w.useSearchParams)(),C=(0,f.c3)("LoginPage"),F=(0,b.f4)();(0,i.useEffect)(()=>{let e=null==R?void 0:R.get("accessToken"),t=null==R?void 0:R.get("refreshToken");if(e&&t){(0,g.oA)({accessToken:e,refreshToken:t}),A.push("/");return}},[R,A]);let{refetch:E}=(0,k.tg)(),O=async e=>{if(e.preventDefault(),!r)return void y(C("nicknameError"));if(m.length<6)return void y(C("passwordError"));h(!0),y("");try{let{accessToken:e,refreshToken:t}=(await c.Rh.post("/auth/login-with-email",{email:r,password:m},{headers:{"Accept-Language":F}})).data;(0,g.oA)({accessToken:e,refreshToken:t}),await E(),console.log("Access Token:",e,"Refresh Token:",t),A.push("/")}catch(e){var t,_;console.error("Login error:",e),u.o.error((0,a.jsx)("div",{style:{lineHeight:1.5},children:(0,a.jsx)("strong",{style:{display:"block",marginBottom:4},children:C("autorithationError")})}),{style:{background:"#AC2525"}}),y((null==(_=e.response)||null==(t=_.data)?void 0:t.message)||C("autorithationError"))}finally{h(!1)}},T=async e=>{try{let{accessToken:t,refreshToken:r}=(await c.Rh.post("/auth/telegram-auth",e,{headers:{"Accept-Language":F}})).data;t&&r&&((0,g.oA)({accessToken:t,refreshToken:r}),A.push("/"))}catch(a){var t;console.error("Telegram auth error:",a);let r=new URLSearchParams({email:e.email||"",picture:e.photo_url||"",telegram_id:(null==(t=e.id)?void 0:t.toString())||"",username:e.username||"",first_name:e.first_name||"",last_name:e.last_name||""});A.push("/register?".concat(r.toString()))}};return(0,a.jsxs)("div",{className:"".concat(n().login__box),children:[(0,a.jsx)(o.A,{categories:t}),(0,a.jsxs)("div",{className:"".concat(n().login__container," container"),children:[(0,a.jsxs)("div",{className:"".concat(n().login__inner),children:[(0,a.jsx)(_.default,{className:n().decor__image,src:"/new_login.webp",width:580,height:745,alt:C("decorationImage")}),N?(0,a.jsx)(v,{onBack:()=>{S(!1),y("")}}):(0,a.jsxs)("form",{className:"".concat(n().login__form__box),children:[(0,a.jsx)("h2",{className:"".concat(n().login__title),children:C("loginTitle")}),(0,a.jsx)("div",{className:"".concat(n().inputs__box),children:(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(l.A,{idForLabel:"cy-email-input",extraClass:" ".concat(n().inputs__text_extra," ").concat(0!==r.length&&r.length<3&&n().extra__name__class," ").concat(P&&n().extra__name__class),isSecret:!1,onSetValue:e=>{s(e),y("")},currentValue:r,placeholder:C("writeEmailOrNickname"),title:(0,a.jsx)("p",{className:"".concat(n().input__title),children:C("loginAccount")})}),(0,a.jsx)(l.A,{idForLabel:"cy-password-input",extraClass:"".concat(n().inputs__text_extra," ").concat(n().inputs__text_extra_2," ").concat(P&&n().extra__name__class),isSecret:!0,onSetValue:p,currentValue:m,errorValue:m.length<6&&0!==m.length?C("passwordError"):"",placeholder:C("writePassword"),title:(0,a.jsx)("p",{className:"".concat(n().input__title),children:C("loginPassword")})}),(0,a.jsx)("button",{id:"cy-login-button",onClick:e=>O(e),className:"".concat(n().form__button),disabled:x,children:x?C("loading"):C("loginButton")}),(0,a.jsx)(L(),{className:"".concat(n().form__button_register),href:"/register",children:C("loginRegister")}),(0,a.jsx)("div",{className:"".concat(n().form__reset__password__button),onClick:()=>{S(!0),y(""),s(""),p("")},children:C("loginForgotPassword")}),(0,a.jsxs)("div",{className:"".concat(n().apps__login),children:[(0,a.jsx)("p",{className:"".concat(n().apps__text),children:C("loginWithSocial")}),(0,a.jsxs)("div",{className:"".concat(n().apps__images),children:["en"===F&&(0,a.jsx)(L(),{className:"".concat(n().registr__image),href:"".concat("https://exporteru.com","/api/v1/oauth2/google"),children:(0,a.jsx)(_.default,{className:"".concat(n().registr__image),src:"/google_registr.svg",width:50,height:50,alt:"registr with google"})}),(0,a.jsxs)("div",{className:n().telegram__button__container,children:[(0,a.jsx)(_.default,{className:"".concat(n().registr__image),src:"/tg.svg",width:50,height:50,alt:"registr with telegram"}),(0,a.jsx)(j,{onAuth:T,className:n().telegram__widget__overlay})]})]})]})]})})]})]}),(0,a.jsx)("div",{className:"".concat(n().margin__box)})]}),(0,a.jsx)(d.default,{extraClass:"".concat(n().extraFooter)})]})}},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return s},createSnapshot:function(){return o}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let _="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function s(){return _?new _:new a}function n(e){return _?_.bind(e):a.bind(e)}function o(){return _?_.snapshot():function(e,...t){return e(...t)}}},77519:e=>{e.exports={inputOtpContainer:"inputOTP_inputOtpContainer__FHasN",inputOtpBox:"inputOTP_inputOtpBox__9OYqz"}},81260:e=>{e.exports={login__inner:"LoginPage_login__inner__mrp31",login__container:"LoginPage_login__container__W7o_Z",extraFooter:"LoginPage_extraFooter__cftJ8",login__form__box:"LoginPage_login__form__box__6wgH9",form__reset__password__button:"LoginPage_form__reset__password__button__VQShu",margin__box:"LoginPage_margin__box__QrTkf",decor__image:"LoginPage_decor__image__6RQ0H",toggle__action__button:"LoginPage_toggle__action__button___Dl9I",login__title:"LoginPage_login__title__mvVnR",inputs__box:"LoginPage_inputs__box__fMICc",form__button:"LoginPage_form__button__Dhcud",form__button_register:"LoginPage_form__button_register__cBW5l",region__item:"LoginPage_region__item__ubCrd",registr__image:"LoginPage_registr__image__Pr08x",drop__box:"LoginPage_drop__box__scuw4",extra__drop__list:"LoginPage_extra__drop__list__d3PUh",extra__list__style:"LoginPage_extra__list__style__nQxEg",inputs__text_extra:"LoginPage_inputs__text_extra__cXjFV",telegram__button__container:"LoginPage_telegram__button__container__pLLpO",telegram__widget__overlay:"LoginPage_telegram__widget__overlay__krRHo",input__title:"LoginPage_input__title__XzV0F",hidden_extra_list:"LoginPage_hidden_extra_list__gQITb",show_extra_list:"LoginPage_show_extra_list__V9uPk",inputs__text_extra_2:"LoginPage_inputs__text_extra_2__kFTE3",extra__name__class:"LoginPage_extra__name__class__pOYxq",some__drop__box:"LoginPage_some__drop__box__CvFc_",extra__email__error:"LoginPage_extra__email__error__x4sbh",input__subtitle:"LoginPage_input__subtitle__7JtVt",checked__email:"LoginPage_checked__email__3UYwD",inputOtp_section:"LoginPage_inputOtp_section__OTbzD",otp__text:"LoginPage_otp__text__nFrT3",apps__login:"LoginPage_apps__login__Qmb1I",apps__text:"LoginPage_apps__text__jaw7b",apps__images:"LoginPage_apps__images__Fp_K3",problem__link:"LoginPage_problem__link__2p7Lm"}},83419:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(95155),_=r(12115),s=r(77519),n=r.n(s);let o=e=>{let{length:t=4,onComplete:r,disabled:s=!1,className:o=""}=e,[i,l]=(0,_.useState)(Array(t).fill("")),[c,u]=(0,_.useState)(!1),g=(0,_.useRef)([]);return(0,_.useEffect)(()=>{let e=i.join("");e.length!==t||c?e.length<t&&c&&u(!1):(u(!0),r(e))},[i,t,r,c]),(0,a.jsx)("div",{className:"".concat(n().inputOtpContainer," ").concat(o),children:Array.from({length:t},(e,r)=>(0,a.jsx)("input",{ref:e=>{e&&(g.current[r]=e)},type:"text",inputMode:"numeric",maxLength:1,value:i[r],onChange:e=>((e,r)=>{let a=e.target.value;!(a.length>1)&&(l(e=>{let t=[...e];return t[r]=a,t}),a&&r<t-1&&g.current[r+1]&&g.current[r+1].focus())})(e,r),onKeyDown:e=>((e,r)=>{"Backspace"===e.key?""===i[r]?r>0&&g.current[r-1]&&g.current[r-1].focus():l(e=>{let t=[...e];return t[r]="",t}):"ArrowLeft"===e.key&&r>0&&g.current[r-1]?g.current[r-1].focus():"ArrowRight"===e.key&&r<t-1&&g.current[r+1]&&g.current[r+1].focus()})(e,r),onPaste:e=>((e,r)=>{e.preventDefault();let a=e.clipboardData.getData("text/plain").trim();if(!a||0===a.length)return;let _=a.split("").slice(0,t-r),s=[...i];_.forEach((e,a)=>{let _=r+a;_<t&&(s[_]=e)}),l(s);let n=Math.min(r+_.length,t-1);g.current[n]&&g.current[n].focus()})(e,r),onFocus:()=>(e=>{g.current[e]&&g.current[e].select()})(r),disabled:s,className:n().inputOtpBox,autoComplete:"off",placeholder:" ","aria-label":"Digit ".concat(r+1)},r))})}},85744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=r(17828)}},e=>{e.O(0,[1280,5748,7444,2550,7845,1699,988,8102,6671,9162,3236,6949,6607,8441,5964,7358],()=>e(e.s=49395)),_N_E=e.O()}]);