(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7769],{3771:(e,t,_)=>{"use strict";function a(e){let t=Number(e.replace(/\./g,""));if(isNaN(t))throw Error("Invalid number input");return t.toLocaleString("de-DE").replace(/\./g,".\xad")}_.d(t,{D:()=>a})},17828:(e,t,_)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,_(64054).createAsyncLocalStorage)()},27519:e=>{e.exports={button__box:"BasketButtonUI_button__box__J1xo_",add__box:"BasketButtonUI_add__box__AFIty",count__box:"BasketButtonUI_count__box__umiRa",decrease__text:"BasketButtonUI_decrease__text___9_S1",count__inBox:"BasketButtonUI_count__inBox__YMrTE",increase__text:"BasketButtonUI_increase__text___ZMAA",count__active:"BasketButtonUI_count__active__b9vP8",dark__text:"BasketButtonUI_dark__text__Ou7UZ",white__text:"BasketButtonUI_white__text__4BbD5"}},39897:e=>{e.exports={button:"toggleFavoritesButtonUI_button__b4sOL"}},54119:(e,t,_)=>{Promise.resolve().then(_.bind(_,98997))},55468:e=>{e.exports={basket__title:"BasketPage_basket__title__EYj6d",basket__content:"BasketPage_basket__content__v2BEl",basket__list:"BasketPage_basket__list__fX767",basket__status:"BasketPage_basket__status__gyQXu",count__and__price:"BasketPage_count__and__price__46gO0",status__title__box:"BasketPage_status__title__box__BJSC7",basket__status__title:"BasketPage_basket__status__title__kKcac",status__title__count:"BasketPage_status__title__count__F4R3k",count__price:"BasketPage_count__price__HY1Hx",line:"BasketPage_line__DWqM0",sell__box:"BasketPage_sell__box__wJ3RR",sel__value:"BasketPage_sel__value__p8NTS",promo__label:"BasketPage_promo__label__TMLG7",promo__box:"BasketPage_promo__box__Ytf_R",promo__input:"BasketPage_promo__input__c4Rs5",delivery__box:"BasketPage_delivery__box__xVLf0",delivery__value:"BasketPage_delivery__value__ycAEQ",result__box:"BasketPage_result__box___h_kD",result__title:"BasketPage_result__title__Pnhcr",result__val:"BasketPage_result__val__6XP89",by__button:"BasketPage_by__button__sUIoi",mobile__menu:"BasketPage_mobile__menu__xoeZy",mobile__menu__info:"BasketPage_mobile__menu__info__uG9NR",mobile__menu__count:"BasketPage_mobile__menu__count__YZQ63",mobile__menu__price:"BasketPage_mobile__menu__price__mV23j",mobile__menu__button:"BasketPage_mobile__menu__button__dRlFz"}},63515:(e,t,_)=>{"use strict";_.d(t,{A:()=>o});var a=_(95155),s=_(12115),n=_(39897),i=_.n(n);let o=e=>{let{extraClass:t="",extraStyles:_={},isActive:n=!1,onClick:o}=e,[c,r]=(0,s.useState)(n);return(0,a.jsx)("button",{id:"cy-toggle-favorites-button",className:"".concat(i().button," ").concat(t),"data-active":c,style:_,onClick:e=>{e.preventDefault(),e.stopPropagation(),(e=>{e.preventDefault(),e.stopPropagation(),r(!c),null==o||o(e)})(e)},"aria-label":c?"Remove from favorites":"Add to favorites",children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 1.75L9.06255 8.95L1.30005 9.525L7.25005 14.55L5.38755 22.1L12 18M12 1.75L14.9376 8.95L22.7 9.525L16.7501 14.55L18.6126 22.1L12 18",fill:c?"#AC2525":"white",fillOpacity:c?"1":"0.5",stroke:"#181818",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var _ in t)Object.defineProperty(e,_,{enumerable:!0,get:t[_]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return o}});let _=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw _}getStore(){}run(){throw _}exit(){throw _}enterWith(){throw _}static bind(e){return e}}let s="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return s?new s:new a}function i(e){return s?s.bind(e):a.bind(e)}function o(){return s?s.snapshot():function(e,...t){return e(...t)}}},69821:e=>{e.exports={basket__item:"BasketCard_basket__item__KsT0t",item__image__box:"BasketCard_item__image__box__tjLZS",basket__image:"BasketCard_basket__image___xL0I",star__extra:"BasketCard_star__extra__ISIW3",info__box:"BasketCard_info__box__knlZQ",info__top__box:"BasketCard_info__top__box__qlu_D",top__texts:"BasketCard_top__texts__h3Ky_",info__title:"BasketCard_info__title__FldRa",info__subtitle:"BasketCard_info__subtitle__xyB6e",info__descr:"BasketCard_info__descr__pXPx_",info__delivery:"BasketCard_info__delivery__hLUmp",top__price__box:"BasketCard_top__price__box__YNlrF",spec__price_discount:"BasketCard_spec__price_discount__KGs86",price:"BasketCard_price__KVy9K",spec__price:"BasketCard_spec__price__FgtOk",info__buttons__trash_image:"BasketCard_info__buttons__trash_image__1UxT7",info__buttons__box:"BasketCard_info__buttons__box__Jl8HR",info__buttons__extra:"BasketCard_info__buttons__extra__mhud2",info__buttons__extra__little:"BasketCard_info__buttons__extra__little__4WGuj",info__buttons__extra__big:"BasketCard_info__buttons__extra__big__MifPg"}},78126:(e,t)=>{"use strict";function _(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return _}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},85744:(e,t,_)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=_(17828)},98997:(e,t,_)=>{"use strict";_.d(t,{default:()=>p});var a=_(95155),s=_(75081),n=_(12115),i=_(55468),o=_.n(i),c=_(69821),r=_.n(c),l=_(66766),d=_(63515),u=_(94872),b=_(27519),x=_.n(b),m=_(9013);let v=e=>{let{product:t,extraClass:_="",textColor:s="white",iconColor:i="white"}=e,{productsInBasket:o}=(0,u.N)(e=>e.basket),[c,r]=(0,n.useState)(!1),{addToBasket:d,increaseCount:b,decreaseCount:v}=(0,m.d)(),f=o.find(e=>{var _,a;let s=null==e||null==(_=e.id)?void 0:_.toString(),n=null==t||null==(a=t.id)?void 0:a.toString();return s&&n&&s===n});return(0,n.useEffect)(()=>{r(o.some(e=>e.id===t.id))},[o,t.id]),(0,a.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault(),c||d({...t})},className:" ".concat(c&&x().count__active," ").concat(x().button__box," ").concat(_),children:c?(0,a.jsxs)("button",{className:"".concat(x().count__box),children:[(0,a.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault(),v(t.id.toString())},className:"".concat(x().decrease__text),children:"-"}),(0,a.jsx)("div",{className:"".concat(x().count__inBox),children:null==f?void 0:f.countInBasket}),(0,a.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),b(t.id.toString())},className:"".concat(x().increase__text),children:"+"})]}):(0,a.jsxs)("button",{className:" ".concat(x().add__box," ").concat("dark"===s?x().dark__text:x().white__text),children:["Добавить",(0,a.jsx)(l.default,{src:"dark"===i?"/dark_basket.svg":"/miniBasket.svg",alt:"add in basket",width:16,height:14})]})})};var f=_(3771);let k=e=>{var t,_;let{product:s,onFavClick:n}=e,{productInFavorites:i}=(0,u.N)(e=>e.favorites),o=i.some(e=>e.id.toString()===s.id.toString()),{removeFromBasket:c}=(0,m.d)();return(0,a.jsxs)("li",{className:r().basket__item,children:[(0,a.jsxs)("div",{className:"".concat(r().item__image__box),children:[(0,a.jsx)(l.default,{className:r().basket__image,src:s.previewImageUrl,alt:s.title,width:100,height:100}),(0,a.jsx)(d.A,{onClick:n,extraClass:"".concat(r().star__extra),isActive:o}),(0,a.jsx)(v,{extraClass:"".concat(r().info__buttons__extra," ").concat(r().info__buttons__extra__little),product:s})]}),(0,a.jsxs)("div",{className:"".concat(r().info__box),children:[(0,a.jsxs)("div",{className:"".concat(r().info__top__box),children:[(0,a.jsxs)("div",{className:"".concat(r().top__texts),children:[(0,a.jsx)("div",{className:"".concat(r().info__title),children:s.title}),(0,a.jsx)("div",{className:"".concat(r().info__subtitle),children:"Описание "+s.title+" "+s.title+" "+s.title+" "+s.title+" "+s.title}),(0,a.jsx)("div",{className:"".concat(r().info__descr),children:"Мини ".concat(s.title)}),(0,a.jsx)("div",{className:"".concat(r().info__delivery),children:"".concat((null==s||null==(t=s.deliveryMethod)?void 0:t.name)&&((null==s||null==(_=s.deliveryMethod)?void 0:_.name)||s.deliveryMethods.map(e=>e.name)))})]}),(0,a.jsxs)("div",{className:"".concat(r().top__price__box),children:[s.discountedPrice!==s.originalPrice&&(0,a.jsx)("div",{className:"".concat(r().spec__price," "),children:(0,f.D)(s.discountedPrice.toString())+" RUB"}),(0,a.jsx)("div",{className:"".concat(r().price," ").concat(s.discountedPrice!==s.originalPrice&&r().spec__price_discount),children:(0,f.D)(s.originalPrice.toString())+" RUB"})]})]}),(0,a.jsxs)("div",{className:"".concat(r().info__buttons__box),children:[(0,a.jsx)(l.default,{onClick:()=>c(s.id.toString()),className:r().info__buttons__trash_image,src:"/trash.svg",alt:"trash",width:16,height:18}),(0,a.jsx)(v,{extraClass:"".concat(r().info__buttons__extra," ").concat(r().info__buttons__extra__big),product:s})]})]})]})};var h=_(29795);let p=()=>{let{productsInBasket:e,basketIsEmpty:t}=(0,u.N)(e=>e.basket),{productInFavorites:_}=(0,u.N)(e=>e.favorites),[i,c]=(0,n.useState)([]),[r,l]=(0,n.useState)(0),[d,b]=(0,n.useState)(0),[x,v]=(0,n.useState)(0),[p,g]=(0,n.useState)(!0),B=(0,n.useRef)(null),{toggleToFavorites:j}=(0,m.d)();return(0,n.useEffect)(()=>{c(_.filter(t=>e.some(e=>e.id===t.id)).map(e=>e.id.toString()))},[e,_]),(0,n.useEffect)(()=>{let t=e.reduce((e,t)=>e+t.originalPrice*(t.countInBasket||1),0),_=e.reduce((e,t)=>e+(t.discountedPrice||0)*(t.countInBasket||1),0),a=e.reduce((e,t)=>e+(t.countInBasket||1),0);l(t),b(t-_),v(a)},[JSON.stringify(e)]),(0,n.useEffect)(()=>{let e=()=>{if(B.current){let e=B.current.getBoundingClientRect();e.top<window.innerHeight&&e.bottom>0?g(!1):g(!0)}};return window.addEventListener("scroll",e),e(),()=>{window.removeEventListener("scroll",e)}},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.default,{}),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("h1",{className:o().basket__title,children:"Корзина"}),(0,a.jsxs)("div",{className:o().basket__content,children:[(0,a.jsx)("ul",{className:o().basket__list,children:t?(0,a.jsx)("li",{children:"Корзина пуста"}):e.map(e=>(0,a.jsx)(k,{onFavClick:()=>{j(e)},product:e},e.id))}),(0,a.jsxs)("div",{className:o().basket__status,ref:B,children:[(0,a.jsxs)("div",{className:"".concat(o().status__title__box),children:[(0,a.jsx)("h2",{className:"".concat(o().basket__status__title),children:"Ваша корзина"}),(0,a.jsxs)("div",{className:"".concat(o().status__title__count),children:[(0,a.jsx)("div",{className:"".concat(o().status__elements),children:"".concat(e.length," товаров ")}),(0,a.jsx)("div",{className:"".concat(o().line)}),(0,a.jsx)("div",{className:"".concat(o().status__elements__count),children:"".concat(x," шт.")})]})]}),(0,a.jsxs)("div",{className:"".concat(o().count__and__price),children:[(0,a.jsx)("div",{className:"".concat(o().count__text),children:"Товары (".concat(e.length,")")}),(0,a.jsxs)("div",{className:"".concat(o().count__price),children:[(0,f.D)(r.toString())," RUB"]})]}),(0,a.jsxs)("div",{className:"".concat(o().sell__box),children:[(0,a.jsx)("div",{className:"".concat(o().sel__text),children:"Скидка"}),(0,a.jsx)("div",{className:"".concat(o().sel__value),children:"- ".concat((0,f.D)(d.toString())," RUB")})]}),(0,a.jsxs)("div",{className:"".concat(o().promo__box),children:[(0,a.jsx)("div",{className:"".concat(o().promo__text),children:"Введите промокод"}),(0,a.jsx)("label",{className:"".concat(o().promo__label),htmlFor:"input123",children:(0,a.jsx)("input",{className:"".concat(o().promo__input),id:"input123"})})]}),(0,a.jsxs)("div",{className:"".concat(o().delivery__box),children:[(0,a.jsx)("div",{className:"".concat(o().delivery__text),children:"Способ доставки:"}),(0,a.jsx)("div",{className:"".concat(o().delivery__value),children:"Доставка, Самовывоз"})]}),(0,a.jsxs)("div",{className:o().result__box,children:[(0,a.jsx)("div",{className:o().result__title,children:"Итог"}),(0,a.jsxs)("div",{className:o().result__val,children:[(0,f.D)((r-d).toString())," RUB"]})]}),(0,a.jsx)("button",{className:"".concat(o().by__button),children:"Перейти к оформлению"})]})]})]}),!t&&p&&(0,a.jsxs)("div",{className:o().mobile__menu,children:[(0,a.jsxs)("div",{className:o().mobile__menu__info,children:[(0,a.jsx)("div",{className:o().mobile__menu__count,children:"".concat(x," шт.")}),(0,a.jsxs)("div",{className:o().mobile__menu__price,children:[(0,f.D)((r-d).toString())," RUB"]})]}),(0,a.jsx)("button",{className:o().mobile__menu__button,children:"Оформить"})]}),(0,a.jsx)(h.default,{})]})}}},e=>{e.O(0,[5748,1628,1280,9418,7552,2550,7845,1699,988,8102,9162,3236,6949,5081,8441,5964,7358],()=>e(e.s=54119)),_N_E=e.O()}]);